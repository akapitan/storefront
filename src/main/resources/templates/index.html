<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="fragments/head :: head('Home')"></head>
<body>

<!-- Navigation -->
<header th:replace="fragments/nav :: nav"></header>

<!-- Main Content Layout -->
<main>
    <div class="page-layout">
        <!-- Left Sidebar - Category Navigation -->
        <aside class="sidebar" id="sidebar">
            <!-- Toggle Button -->
            <button class="sidebar-toggle"
                    onclick="toggleSidebar()"
                    aria-label="Toggle sidebar"
                    title="Toggle navigation"></button>

            <nav class="category-nav">
                <h2 class="category-nav-title">Product Categories</h2>
                <ul class="category-tree">
                    <li>
                        <a
                                hx-get="/catalog/category/696bc45d-e641-4dd0-b51a-2f019750ee6a"
                                hx-target="#main-content"
                                hx-push-url="true">
                            Fasteners
                            <span class="category-count">(1,234)</span>
                        </a>
                        <ul>
                            <li><a href="#"
                                   hx-get="/catalog/category/screws"
                                   hx-target="#main-content"
                                   hx-push-url="true">Screws <span class="category-count">(456)</span></a></li>
                            <li><a href="#"
                                   hx-get="/catalog/category/bolts"
                                   hx-target="#main-content"
                                   hx-push-url="true">Bolts <span class="category-count">(389)</span></a></li>
                            <li><a href="#"
                                   hx-get="/catalog/category/nuts"
                                   hx-target="#main-content"
                                   hx-push-url="true">Nuts <span class="category-count">(234)</span></a></li>
                            <li><a href="#"
                                   hx-get="/catalog/category/washers"
                                   hx-target="#main-content"
                                   hx-push-url="true">Washers <span class="category-count">(155)</span></a></li>
                        </ul>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='hardware')}"
                           hx-get="@{/catalog/category/{id}(id='hardware')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Hardware
                            <span class="category-count">(892)</span>
                        </a>
                        <ul>
                            <li><a href="#"
                                   hx-get="/catalog/category/hinges"
                                   hx-target="#main-content"
                                   hx-push-url="true">Hinges <span class="category-count">(167)</span></a></li>
                            <li><a href="#"
                                   hx-get="/catalog/category/brackets"
                                   hx-target="#main-content"
                                   hx-push-url="true">Brackets <span class="category-count">(234)</span></a></li>
                            <li><a href="#"
                                   hx-get="/catalog/category/handles"
                                   hx-target="#main-content"
                                   hx-push-url="true">Handles <span class="category-count">(123)</span></a></li>
                        </ul>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='tools')}"
                           hx-get="@{/catalog/category/{id}(id='tools')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Tools
                            <span class="category-count">(2,456)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='electrical')}"
                           hx-get="@{/catalog/category/{id}(id='electrical')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Electrical
                            <span class="category-count">(1,567)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='plumbing')}"
                           hx-get="@{/catalog/category/{id}(id='plumbing')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Plumbing
                            <span class="category-count">(987)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='safety')}"
                           hx-get="@{/catalog/category/{id}(id='safety')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Safety Equipment
                            <span class="category-count">(654)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='adhesives')}"
                           hx-get="@{/catalog/category/{id}(id='adhesives')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Adhesives & Sealants
                            <span class="category-count">(423)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='material-handling')}"
                           hx-get="@{/catalog/category/{id}(id='material-handling')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Material Handling
                            <span class="category-count">(756)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='pneumatics')}"
                           hx-get="@{/catalog/category/{id}(id='pneumatics')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Pneumatics & Hydraulics
                            <span class="category-count">(1,123)</span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/catalog/category/{id}(id='power-transmission')}"
                           hx-get="@{/catalog/category/{id}(id='power-transmission')}"
                           hx-target="#main-content"
                           hx-push-url="true">
                            Power Transmission
                            <span class="category-count">(845)</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content" id="main-content">
            <div th:replace="~{:: #home-content}"></div>
        </div>
    </div>
</main>

<!--
  ══════════════════════════════════════════════════════════
  Fragment: home-content
  Target:   #main-content
  HTMX swaps this fragment when navigating back to home
  th:remove="tag" ensures this block is hidden unless explicitly requested
  ══════════════════════════════════════════════════════════
-->
<th:block th:remove="tag">
<div id="home-content" th:fragment="home-content">
    <!-- Welcome Section -->
    <section class="hero">
        <h1 class="page-title">Welcome to Our Industrial Supply Catalog</h1>
        <p class="page-subtitle">
            Find the parts you need from our extensive inventory of industrial components,
            hardware, tools, and supplies. Browse by category or use our powerful search.
        </p>
    </section>

    <!-- Featured Categories Grid -->
    <section class="categories">
        <h2 class="mb-3">Featured Categories</h2>
        <div class="category-grid">
            <a class="category-card"
               hx-get="/catalog/category/696bc45d-e641-4dd0-b51a-2f019750ee6a"
               hx-target="#main-content"
               hx-push-url="true">
                <div class="category-card-title">Fasteners</div>
                <div class="category-card-description">
                    Screws, bolts, nuts, washers, and threaded fasteners in various materials and finishes
                </div>
                <div class="category-card-count">1,234 products</div>
            </a>

            <a th:href="@{/catalog/category/{id}(id='hardware')}"
               class="category-card"
               hx-get="@{/catalog/category/{id}(id='hardware')}"
               hx-target="#main-content"
               hx-push-url="true">
                <div class="category-card-title">Hardware</div>
                <div class="category-card-description">
                    Hinges, brackets, handles, and mounting hardware for industrial applications
                </div>
                <div class="category-card-count">892 products</div>
            </a>

            <a th:href="@{/catalog/category/{id}(id='tools')}"
               class="category-card"
               hx-get="@{/catalog/category/{id}(id='tools')}"
               hx-target="#main-content"
               hx-push-url="true">
                <div class="category-card-title">Tools</div>
                <div class="category-card-description">
                    Hand tools, power tools, measuring instruments, and accessories
                </div>
                <div class="category-card-count">2,456 products</div>
            </a>

            <a
                    class="category-card"
                    hx-get="@{/catalog/category/{id}(id='electrical')}"
                    hx-target="#main-content"
                    hx-push-url="true">
                <div class="category-card-title">Electrical</div>
                <div class="category-card-description">
                    Wiring, connectors, switches, and electrical components for all applications
                </div>
                <div class="category-card-count">1,567 products</div>
            </a>

            <a th:href="@{/catalog/category/{id}(id='plumbing')}"
               class="category-card"
               hx-get="@{/catalog/category/{id}(id='plumbing')}"
               hx-target="#main-content"
               hx-push-url="true">
                <div class="category-card-title">Plumbing</div>
                <div class="category-card-description">
                    Pipes, fittings, valves, and plumbing supplies in multiple materials
                </div>
                <div class="category-card-count">987 products</div>
            </a>

            <a th:href="@{/catalog/category/{id}(id='safety')}"
               class="category-card"
               hx-get="@{/catalog/category/{id}(id='safety')}"
               hx-target="#main-content"
               hx-push-url="true">
                <div class="category-card-title">Safety Equipment</div>
                <div class="category-card-description">
                    Personal protective equipment, safety gear, and protective equipment
                </div>
                <div class="category-card-count">654 products</div>
            </a>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="featured-products mt-4" th:if="${featuredProducts != null and !featuredProducts.isEmpty()}">
        <h2 class="mb-3">Featured Products</h2>
        <div class="product-grid">
            <div th:each="product : ${featuredProducts}" class="product-card">
                <a th:href="@{/catalog/product/{sku}(sku=${product.sku()})}"
                   hx-get="@{/catalog/product/{sku}(sku=${product.sku()})}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <img th:if="${product.thumbnailKey() != null}"
                         th:src="@{/assets/images/{key}(key=${product.thumbnailKey()})}"
                         th:alt="${product.name()}"
                         loading="lazy"/>
                    <div th:unless="${product.thumbnailKey() != null}" class="no-image">No Image Available</div>
                </a>

                <div class="product-info">
                    <a th:href="@{/catalog/product/{sku}(sku=${product.sku()})}"
                       th:text="${product.name()}"
                       class="product-name"
                       hx-get="@{/catalog/product/{sku}(sku=${product.sku()})}"
                       hx-target="#main-content"
                       hx-push-url="true">Product Name</a>

                    <span th:text="${product.sku()}" class="product-sku">SKU-123</span>

                    <span th:text="${#numbers.formatCurrency(product.price())}"
                          class="product-price">$0.00</span>
                </div>
            </div>
        </div>
    </section>
</div>
</th:block>

<!-- Hidden div to close the page-layout structure -->
<div style="display: none;">
    <!-- This closes the .page-layout div that was opened earlier -->
</div>
</main>

<!-- Footer -->
<footer th:replace="fragments/footer :: footer"></footer>

<!-- Sidebar Toggle Script -->
<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');

        // Save state to localStorage
        const isCollapsed = sidebar.classList.contains('collapsed');
        localStorage.setItem('sidebarCollapsed', isCollapsed);
    }

    // Restore sidebar state on page load
    document.addEventListener('DOMContentLoaded', function () {
        const sidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
        if (sidebarCollapsed) {
            document.getElementById('sidebar').classList.add('collapsed');
        }
    });
</script>

</body>
</html>

